define("KUYU.Control",[],function(){var t=window,e=t.document,n={},i={},a=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}(),o={callbacks:{},on:function(t,e){this.callbacks[t]=this.callbacks[t]||[],this.callbacks[t].push(e)},fire:function(t){for(var e=this.callbacks[t]||[],n=0,i=e.length;n<i;n++)e[n].apply(this,arguments)}},r={set:function(t,e,a){var r=n[t];if(arguments<3)return i[object_id];this.setData(t,e,a),o.fire(r,e,a)},setData:function(t,e,n){i[t][e]=n}},s=function(t,e,n){var i=a();this.attr(t,"data-bind-"+i,!0),this.propoties={id:i,"data-attr":"data-bind-"+i,type:"message-"+i,key:e},this.init(n)};s.prototype={set:function(t,e){this.propoties[t]=e},get:function(t){return this.propoties[t]},attr:function(t,e,n){if(t){(t.nodeName||1===t.nodeType)&&(t=[t]);for(var i=0,a=t.length;i<a;i++){if(!n)return t[i].getAttribute(e);t[i].setAttribute(e,n)}}},setData:function(t,e){arguments.length<2||r.set(this.get("id"),t,e)},init:function(t){this.get("id");this.domBinder(),this.dataBinder(),t&&o.on(this.get("type"),t)},domBinder:function(){var t=this,n=(this.get("id"),this.get("data-attr")),i=function(e){console.info(t.get("type"));var i=e.target||e.srcElement;i.getAttribute(n)&&o.fire(t.get("type"),t.get("key"),i.value)};e.addEventListener?e.addEventListener("change",i,!1):e.attachEvent("change",i),o.on(this.get("type"),function(t,i,a,o){if(t)for(var r=e.querySelectorAll("["+n+"]"),s=0,c=r.length;s<c;s++)elem=r[s],"input"===elem.nodeName.toLowerCase()||"textarea"==elem.nodeName.toLowerCase()||"select"==elem.nodeName.toLowerCase()?elem.value=a:elem.innerHTML=a})},dataBinder:function(){var t=this.get("id");i[t]=i[t]||{};var e="message-"+t;n[t]=e,o.on(this.get("type"),function(e,n,i,a){r.setData(t,n,i)})}},_APP.inject("KUYU.Control",s)});